<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/PostsPaginated.vue</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/PostsPaginated.vue</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;script>
/**
 * @file PostsPaginated.vue - pag
 * @author MM
 * @see &lt;a href="https://google.com"> Google &lt;/a>
 */

&lt;/script>

&lt;script setup>


import { nextTick, ref } from 'vue';
import PreviewList from './PreviewList.vue';
import PreviewListLarge from './PreviewListLarge.vue'
// const props = defineProps(['posts', 'pages', 'type']);
const props = defineProps(['type']);
// const posts = ref(props.posts);
// const pages = ref(props.pages);
const posts = ref([]);
const pages = ref([]);

const type = ref(props.type);
// const checkType = function(){
//     console.log(`type: ${type === 'small'}`)
// }
import { getDataFromLink } from "../composables/axiosComposables";
import axios from 'axios';

const selectedPage = ref(0);

/**
 * Get posts from backend by supplied link
 * @param {*} link 
 */
const getPosts = async function(link){
    posts.value = [];
    pages.value = [];
    await nextTick();
    // const data = (await getDataFromLink(link)).value;
    axios.get(link)
    .then((res)=>{
        posts.value = res.data.results;
        pages.value = res.data.context.page_links;
    })

}

const getPostsByPage = async function(link, page_id){
    getPosts(link);
    selectedPage.value = page_id;
}

getPostsByPage('http://127.0.0.1:8000/api/posts', selectedPage.value);

&lt;/script>

&lt;template>
    &lt;div class="post-list" v-if="posts">
        &lt;PreviewList v-for="(post, post_id) in posts" :post="post" v-if="type === 'small'">&lt;/PreviewList>
        &lt;PreviewListLarge v-for="(post, post_id) in posts" :post="post" v-if="type === 'large'">&lt;/PreviewListLarge>
        &lt;div class="pages" v-if="pages">
            &lt;p class="page" v-for="(page, page_id) in pages"
            @click="getPostsByPage(page[0], page_id)"
            :class="(selectedPage === page_id)? 'selected' : 'normal'">{{ page[1] }}&lt;/p>
        &lt;/div>
    &lt;/div>
&lt;/template>

&lt;style scoped>
.pages{
    display: flex;
    justify-content: center;
    font-size: 2.5rem;
    gap: 1rem;
}
.post-list{
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.page:hover{
    font-weight: 600;
    cursor: pointer;
}
.selected{
    font-weight: 700;
}
&lt;/style></code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Jun 13 2023 15:24:00 GMT+0200 (czas Å›rodkowoeuropejski letni)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
